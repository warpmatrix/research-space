# Distream: Scaling Live Video Analytics with Workload-Adaptive Distributed Edge Intelligence

[SenSys '20: Proceedings of the 18th Conference on Embedded Networked Sensor Systems](https://dl.acm.org/doi/10.1145/3384419.3430721)

论文的主要内容：利用分布式智能摄像头和边缘的资源，设计分布式在线视频分析系统适应动态变化的工作负载。从两个角度入手进行优化，在摄像头之间均衡他们的工作负载、在摄像头和边缘集群中指定划分负载方案。

- 在线视频分析的特点：摄像头产生大规模的数据
- 大规模的数据由于网络资源的限制，无法直接将所有数据上传到云数据中心进行处理
- 此前的视频分析系统使用集中式云计算的方式进行处理，这样容易造成瓶颈问题
- 需要将计算资源移动到数据端位置，因此基于“智慧”摄像头的系统架构设计分布式在线视频分析系统

实现分布式摄像头视频分析系统的主要挑战：

- 摄像头之间的负载各不相同：不同摄像头的视频内容不同、设备的异构性、处理负载的开销不同等种种因素加剧了这一问题
- 摄像头和边缘集群的负载不同：摄像头和边缘服务器的计算资源不同，需要视频分析任务采取细粒度的方式进行划分
- 负载的动态波动：分布式摄像头分析系统的负载随着**空间**（不同的摄像头）随着**时间**发生变化：波动模式的变化、负载总量的变化等
  - workload-agnostic baseline：无法适应工作负载的变化出现，出现 under-provisioning 和 over-provisioning
  - 由于设备的异构性和负载的不同，系统需要联合确定各个摄像头和边缘服务器的划分点

解决上述挑战的三个挑战对应的方法，Distream 的关键组成部分：

- cross-camera workload balancer：引入 LSTM 预测未来的工作负载来提升系统性能
  - 由于目标物体的移动性，高负载的摄像头附近也可能有高负载
  - 引入预测器、设备异构性，最小化目标：最小化负载不均衡指数 $v$
  - 使用启发式迭代贪心选择不平衡的摄像头负载进行迁移
- stochastic partitioning scheme：使用随机行为模式划分视频分析流水线，提供灵活细粒度的划分方式
  - 分析视频的流水线路线被有选择地执行，需要考虑所有可能的路径并侧写对应的推断负载
  - 按内容上进行流水线的负载划分具有较粗粒度，难以符合边缘服务器和摄像头工作负载
  - 对每一个摄像头上的每一条分支的流水线使用随机划分模式，使得期望推断负载和摄像头和边缘服务器的工作负载相匹配
- workload adaption controller：当负载不平衡发生时，触发 cross-camera workload balancer 优化系统性能
  - 联合各个摄像头的信息，控制摄像头之间的负载均衡和摄像头和边缘服务器之间的负载均衡
  - 优化目标：满足 SLO 延迟的条件下，最大化系统的吞吐量

在线视频分析流水线的组成：

- CNN-based object detector：使用卷积网络持续对摄像头得到的数据进行分析，在波动的摄像头数据中造成资源的浪费
- light-weight background subtrator：减除背景检测是否存在感兴趣物体，再发给分类器进行后续处理
